<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DAOC Uthgard Player Info</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.2/pure-min.css">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.1.8/vue.min.js"></script>
    <script src="app.js?20170117"></script>
    <style>
        #uthgard-players {
            max-width: 460px;
            margin:0 auto;
        }
        #uthgard-players table {
            min-width: 100%;
        }
        #uthgard-players .form {
            padding-bottom:30px;
        }
        #uthgard-players .results {
        }
        #uthgard-players .status {
            font-style:italic;
        }
        td.xp-level {
            font-size:small;
        }
        .xp-level .xp-max {
            border:1px solid gray;
        }
        .xp-level .xp-max .xp-progress {
            position:relative;
            background-color:lightblue;
            height:4px;
            border-bottom:1px solid gray;
            border-right:1px solid gray;
        }
        .xp-level .xp-max .xp-total-progress {
            position:relative;
            background-color:gray;
            height:6px;
        }
        .status {
            font-size:0.8em;
        }
        .debug {
            font-size:0.6em;
        }
        footer .credit {
            padding-top:20px;
            font-size:0.7em;
            text-align:center;
        }

    </style>
</head>
<body>
<div id="main">
    <div id="uthgard-players" class="pure-form">
        <h1>DAOC Uthgard Player Info</h1>
        
        <div class="form">
            <input title="First name's of players separated by space or commas." type="text" v-model="namesInput" v-on:keyup.enter="fetchAllNames" placeholder="Mistar Bruno Ascerian Felrith" />
           <button class="pure-button" v-on:click="fetchAllNames">Lookup Players</button>
        </div>
        
        <div class="results" v-if="hasResults">
        <table class="pure-table pure-table-horizontal">
            <thead>
                <tr>
                    <th>Full Name</th>
                    <th>Race / Class</th>
                    <th>Level / Realm Rank</th>
                </tr>
            </thead>
            <tbody>
            <tr v-for="user in users">
                <td>{{user.FullName}}</td>
                <td>{{user.RaceName}} {{user.ClassName}}</td>
                <td class="xp-level">
                    {{Math.round( (user.Level + user.XP_Percent) * 100) / 100}} / R{{ Math.round(user.RealmRank + user.RP_Percent) * 100 / 100}}
                    <div class="xp-max">
                        <div class="xp-progress" v-bind:style="{ width: Math.floor( user.XP_Percent * 100) + '%' }"></div>
                        <div class="xp-total-progress" v-bind:style="{ width: Math.floor( ((user.Level + user.XP_Percent)/50) * 100 ) + '%' }"></div>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
        </div>
        
        <div class="status">
            <p v-if="fakeapi">Fake API Mode: Data is not being fetched from actual Uthgard API.</p>
            <p>{{statusMessage}}</p>
        </div>
        
        <button class="pure-button" v-on:click="toggleDebug">Debug Info</button>
        <div class="debug" v-if="debug">
                <h3>
                  Debug Data
                </h3>
                <pre>{{ $data }}</pre>
        </div>
    </div>
</div>
<footer>
    <p class="credit">Built by <a href="http://www.poism.com" target="_BLANK">Po</a> (Mistar Nooblar) | <a href="https://github.com/poism/uthgard-players-lookup" target="_BLANK">View project on Github</a></p>
</footer>
</body>
</html>